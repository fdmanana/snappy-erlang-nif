{erl_opts, [debug_info, warn_unused_vars, warn_shadow_vars, warn_unused_import]}.
{eunit_opts, [verbose]}.

{deps, [
    {snappy, {raw, {git, "git://github.com/google/snappy.git", {tag, "1.1.3"}}}}
 ]}.

%% Compile nif using port compiler plugin
{plugins, [pc,
    {rebar_raw_resource, {git, "git://github.com/basho/rebar_raw_resource.git", {branch, "master"}}
 ]}.

{artifacts, ["priv/snappy_nif.so"]}.

{port_specs, [
    {".*", "priv/snappy_nif.so", ["${REBAR_DEPS_DIR}/snappy/*.cc", "c_src/*.cc"]}
 ]}.

{port_env, [
    {"CFLAGS", "$CFLAGS -I$REBAR_DEPS_DIR"},
    {"LDFLAGS", "$LDFLAGS -lstdc++"}
 ]}.

{provider_hooks, [
    {post, [
        {compile, {pc, compile}},
        {clean, {pc, clean}}
      ]}
 ]}.
